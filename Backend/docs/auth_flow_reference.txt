ğŸ”¥ğŸ”¥ AUTH FLOW - FULL REFERENCE (FOR NOTEPAD) ğŸ”¥ğŸ”¥
ğŸ“¦ PROJECT: TODOAPP - BACKEND AUTH

===========================================
ğŸ“ ROUTES - auth.route.js
===========================================
ğŸ”¸ POST   /signup            â†’ signupController
ğŸ”¸ POST   /verify-otp        â†’ verifyOTP
ğŸ”¸ POST   /resend-otp        â†’ resendOTP
ğŸ”¸ POST   /login             â†’ login
ğŸ”¸ GET    /logout            â†’ logout
ğŸ”¸ POST   /send-reset-otp    â†’ sendResetOTP
ğŸ”¸ POST   /reset-password    â†’ resetPassword

===========================================
ğŸ“ CONTROLLERS - auth.controller.js
===========================================

ğŸŸ¢ signup()
- âœ… Validate input
- ğŸ” Hash password
- ğŸ”¢ Generate 4-digit verifyOTP
- â° Set verifyOTPExpireAt
- âœ‰ï¸  Call sendOTP(email, verifyOTP, "verify")
- ğŸ’¾ Save user to DB
- ğŸª Return JWT in cookie

ğŸŸ¢ verifyOTP()
- ğŸ” Check if user exists
- âœ… Match OTP & check expiry
- â˜‘ï¸ Set user.verified = true
- ğŸ§¹ Clear OTP fields
- ğŸ’¾ Save user

ğŸŸ¢ resendOTP()
- ğŸ” Find user by email
- ğŸ”¢ Generate new OTP
- â° Set new verifyOTP & expiry
- âœ‰ï¸  Call sendOTP(email, OTP, "verify")

ğŸŸ¢ sendResetOTP()
- ğŸ” Check user exists
- ğŸ”¢ Generate 4-digit resetOTP
- â° Set resetOTPExpireAt
- âœ‰ï¸  Call sendOTP(email, OTP, "reset")

ğŸŸ¢ resetPassword()
- âœ… Validate OTP & expiry
- ğŸ” Hash new password
- ğŸ§¹ Clear resetOTP fields
- ğŸ’¾ Save user

ğŸŸ¢ login()
- ğŸ” Validate email + password
- âœ… Check user.verified = true
- ğŸª Return JWT token in cookie

ğŸŸ¢ logout()
- ğŸšª Clear JWT cookie

===========================================
ğŸ“ MIDDLEWARE - authMiddleware.js
===========================================
ğŸ›¡ï¸ protect()
- ğŸ§ª Get JWT from cookie
- ğŸ” Verify and decode token
- ğŸ‘¤ Attach user to req.user
- âŒ Error if token invalid/missing

===========================================
ğŸ“ UTILS - sendOTP.js
===========================================
âœ‰ï¸ sendOTP(email, otp, type)
- ğŸ“¬ Send OTP via email
- ğŸ”§ Uses nodemailer or similar
- ğŸ§¾ type = "verify" | "reset"

===========================================
ğŸ“ UTILS - tokenHandler.js (assumed)
===========================================
ğŸ” generateToken(userId)
ğŸª sendToken(user, res)
- ğŸ¥  Set JWT in cookie

===========================================
ğŸ“ MODELS - userModel.js
===========================================
ğŸ§ Fields:
- name, email, password
- verified (Boolean)
- verifyOTP, verifyOTPExpireAt
- resetOTP, resetOTPExpireAt

===========================================
ğŸ“ CONFIG - db.js
===========================================
ğŸŒ connectDB()
- âš™ï¸ Connects to MongoDB
- ğŸ“„ Uses .env DB_URI

===========================================
ğŸ“ MAIN - server.js
===========================================
ğŸš€ Express App
- ğŸ”Œ Connect DB
- âš™ï¸ Use middlewares
- ğŸ“Œ Mount routers
- ğŸ¯ Start server
